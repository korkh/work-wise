import{c as h,T as E,A as D,a as I,d as u,r as d,k as i,G as A,a5 as j,E as x,g as m,n as N,H as v,e as b,p as _,q as T}from"./index-BicUTnWq.js";import{D as M}from"./DynamicReducerLoader-uIqPQuoA.js";import{a as V}from"./addQueryParams-BwJGGhqi.js";import{E as z}from"./employee_consts-Dz_c2cdH.js";import"./EmployeeList-DUkYGSuu.js";import"./DateInput-Rn-8Xh0L.js";import"./react-datepicker-DdjWqPn5.js";var f=(e=>(e.ID="id",e.EMPLOYEE="lastName",e.EMPLOYEE_ID="employeeId",e))(f||{});const O=e=>{var a;return((a=e.payrollPage)==null?void 0:a.isLoading)||!1},C=e=>{var a;return(a=e.payrollPage)==null?void 0:a.error},w=e=>{var a;return((a=e.payrollPage)==null?void 0:a.pageNumber)||1},R=e=>{var a;return((a=e.payrollPage)==null?void 0:a.pageSize)||10},U=e=>{var a;return(a=e.payrollPage)==null?void 0:a._inited},B=e=>{var a;return((a=e.payrollPage)==null?void 0:a.order)??"asc"},G=e=>{var a;return((a=e.payrollPage)==null?void 0:a.sort)??z.LASTNAME},H=e=>{var a;return((a=e.payrollPage)==null?void 0:a.search)??""},p=h("payrollsPage/fetchPayrollstList",async(e,a)=>{const{extra:r,rejectWithValue:o,getState:s}=a,t=localStorage.getItem(E),n=R(s()),l=G(s()),c=B(s()),L=w(s()),k=H(s());try{if(!t)throw new Error("No token found");V({sort:l,order:c,search:k});const P=await r.api.get("/payrolls",{headers:{Authorization:`Bearer ${t}`},params:{_expand:"user",_pageNumber:L,_pageSize:n,_sort:l,_order:c,q:k}});if(!P.data)throw new Error;return P.data}catch{return o("No response from server")}}),K={selectId:e=>e.id},y=D(K),{selectAll:Y}=y.getSelectors(e=>e.payrollPage||S),S={...y.getInitialState(),isLoading:!1,error:void 0,ids:[],entities:{},pageNumber:1,pageSize:10,hasMore:!0,order:"asc",sort:f.ID,search:"",_inited:!1},F=I({name:"pages/payrollPageSlice",initialState:S,reducers:{setPage:(e,a)=>{e.pageNumber=a.payload},setOrder:(e,a)=>{e.order=a.payload},setSort:(e,a)=>{e.sort=a.payload},setSearch:(e,a)=>{e.search=a.payload},initState:e=>{e.pageSize=8,e._inited=!0}},extraReducers:e=>{e.addCase(p.pending,(a,r)=>{a.error=void 0,a.isLoading=!0,r.meta.arg.replace&&y.removeAll(a)}).addCase(p.fulfilled,(a,r)=>{a.isLoading=!1,a.hasMore=r.payload.length>=a.pageSize;const o=r.payload.filter(s=>s.id);r.meta.arg.replace?y.setAll(a,o):y.addMany(a,o)}).addCase(p.rejected,(a,r)=>{a.isLoading=!1,a.error=r.payload})}}),{reducer:W,actions:g}=F,q=h("documents/initDocumentPage",async(e,a)=>{const{getState:r,dispatch:o}=a;if(!U(r())){const t=e.get("order"),n=e.get("sort"),l=e.get("search");t&&o(g.setOrder(t)),n&&o(g.setSort(n)),l&&o(g.setSearch(l)),o(g.initState()),o(p({}))}}),$=()=>{const{t:e}=u("payrolls");return[{key:"id",header:"No."},{key:"employee",header:e("Last name"),nestedKeys:["lastName"]},{key:"year",header:e("Year")},{key:"month",header:e("Month")},{key:"workingDays",header:e("Working Days")},{key:"workingHours",header:e("Working Hours")},{key:"atlyginimasPagalDS",header:e("Atlyginimas Pagal DS")},{key:"darboDienu",header:e("Darbo Dienų")},{key:"darboValandu",header:e("Darbo Valandų")},{key:"virsvalandziai",header:e("Virsvalandžiai")},{key:"sventinesIrPoilsioValandos",header:e("Sventinės Ir Poilsio Valandos")},{key:"pirmaEilesPareigosTaikomasNPD",header:e("Pirma Eilės Pareigos Taikomas NPD")},{key:"npd",header:e("NPD")},{key:"atlyginimas",header:e("Atlyginimas")},{key:"atostogos",header:e("Atostogos")},{key:"virsvalandziaiPriskaityta",header:e("Virsvalandžiai Priskaityta")},{key:"priedas",header:e("Priedas")},{key:"priedasUzPoilsioIrSventines",header:e("Priedas Už Poilsio Ir Sventines")},{key:"liga2d",header:e("Liga 2d")},{key:"isVisoPriskaityta",header:e("Iš Viso Priskaityta")},{key:"pajamuMokestis20",header:e("Pajamų Mokestis 20%")},{key:"pajamuMokestis15",header:e("Pajamų Mokestis 15%")},{key:"pajamuMokestisOlandija",header:e("Pajamų Mokestis Olandija")},{key:"sodra_19",header:e("Sodra 19%")},{key:"sodra_3",header:e("Sodra 3%")},{key:"isVisoIsskaityta",header:e("Iš Viso Išskaityta")},{key:"ismoketi",header:e("Išmokėti")},{key:"bankas",header:e("Bankas")},{key:"baudos",header:e("Baudos")},{key:"likutis",header:e("Likutis")},{key:"sodra_1",header:e("Sodra 1%")},{key:"sodraIsViso",header:e("Sodra Iš Viso")},{key:"dienpinigai",header:e("Dienpinigai")},{key:"additionalCalculation",header:e("Additional Calculation")},{key:"kiekTuriGauti",header:e("Kiek Turi Gauti")}]},Q=d.memo(function(a){const{payrolls:r,isLoading:o}=a,{t:s}=u("payrolls"),t=$();return i.jsx(i.Fragment,{children:i.jsx(A,{title:s("List of payrolls"),columns:t,data:r,redirect:j,verticalHeaders:!0,children:i.jsx(x,{data:r,isLoading:o,fileName:"Payrolls"})})})}),J=d.memo(function(a){const{className:r}=a,{t:o}=u("payrolls"),s=m(Y),t=m(O),n=m(C),[l,c]=d.useState(!1);return d.useEffect(()=>{s&&s.length>0&&c(!0)},[s]),n?i.jsx(N,{text:o("Pyrolls loading error")}):t&&!l?i.jsx(v,{}):i.jsx(Q,{"data-testid":"PayrollList",payrolls:s,isLoading:t,className:r})}),X={payrollPage:W},Z=()=>{const e=b(),[a]=_();return T(()=>{e(q(a))}),i.jsx(M,{reducers:X,removeAfterUnmount:!1,children:i.jsx(J,{})})},le=d.memo(Z);export{le as default};
